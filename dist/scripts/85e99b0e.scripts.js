"use strict";!function(){var a=angular.module("InfiniteScroll",[]),b=angular.element;a.directive("infiniteScroll",["$parse","$rootScope","$window",function(a,c,d){return{restrict:"A",link:function(a,c,e){d=b(d),e.distanceTrigger=400|e.distanceTrigger;var f=c.children().first(),g=!1;a.$eval(e.infiniteScroll),c.on("scroll",function(){if(!g){var b=c.scrollTop()+c.height();f.height()-b<e.distanceTrigger&&(console.log("Loading more items"),a.$eval(e.infiniteScroll),g=!0,setTimeout(function(){g=!1},800))}})}}}])}(),function(){var a=angular.module("services.Items",[]);a.service("ItemService",["$q",function(a){this.loadItems=function(b,c){var d=a.defer();return setTimeout(function(){for(var a=[],e=b;b+c>=e;e++)a.push({id:e,name:["Name",e].join(" "),description:["Description",e].join(" ")});d.resolve(a)},300),d.promise}}])}(),angular.module("infiniteScrollApp",["ngCookies","ngResource","ngSanitize","ngRoute","InfiniteScroll","services.Items"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("infiniteScrollApp").controller("MainCtrl",["$scope","ItemService",function(a,b){a.items=[],a.lastItem=1,a.offset=40,a.loadItems=function(){b.loadItems(a.lastItem,a.offset).then(function(b){a.items=a.items.concat(b),a.lastItem+=a.offset+1})},console.log("Main")}]);